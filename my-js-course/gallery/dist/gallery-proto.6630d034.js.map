{"version":3,"sources":["gallery-proto.js"],"names":["Gallery","gallery","Error","images","Array","from","querySelectorAll","modal","document","querySelector","prevButton","nextButton","showNextImage","bind","showPrevImage","handleKeyUp","handleClickOutside","forEach","image","addEventListener","e","showImage","currentTarget","key","prototype","openModal","console","info","matches","classList","add","window","closeModal","remove","removeEventListener","target","log","currentImage","nextElementSibling","firstElementChild","previousElementSibling","lastElementChild","el","src","textContent","title","dataset","description","gallery1","gallery2"],"mappings":"AAAA,SAASA,OAAT,CAAiBC,OAAjB,EAA0B;AAAA;;AACxB,MAAI,CAACA,OAAL,EAAc;AACZ,UAAM,IAAIC,KAAJ,CAAU,6BAAV,CAAN;AACD,GAHuB,CAKxB;;;AAEA,OAAKC,MAAL,GAAcC,KAAK,CAACC,IAAN,CAAWJ,OAAO,CAACK,gBAAR,CAAyB,KAAzB,CAAX,CAAd;AACA,OAAKC,KAAL,GAAaC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAb;AACA,OAAKC,UAAL,GAAkBF,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAlB;AACA,OAAKE,UAAL,GAAkBH,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAlB,CAVwB,CAYxB;;AACA,OAAKG,aAAL,GAAqB,KAAKA,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAArB;AACA,OAAKC,aAAL,GAAqB,KAAKA,aAAL,CAAmBD,IAAnB,CAAwB,IAAxB,CAArB;AACA,OAAKE,WAAL,GAAmB,KAAKA,WAAL,CAAiBF,IAAjB,CAAsB,IAAtB,CAAnB;AACA,OAAKG,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBH,IAAxB,CAA6B,IAA7B,CAA1B,CAhBwB,CAkBxB;;AAEA,OAAKV,MAAL,CAAYc,OAAZ,CAAoB,UAACC,KAAD;AAAA,WAClBA,KAAK,CAACC,gBAAN,CAAuB,OAAvB,EAAgC,UAACC,CAAD,EAAO;AACrC,MAAA,KAAI,CAACC,SAAL,CAAeD,CAAC,CAACE,aAAjB;AACD,KAFD,CADkB;AAAA,GAApB;AAKA,OAAKnB,MAAL,CAAYc,OAAZ,CAAoB,UAACC,KAAD;AAAA,WAClBA,KAAK,CAACC,gBAAN,CAAuB,OAAvB,EAAgC,UAACC,CAAD,EAAO;AACrC;AACA,UAAIA,CAAC,CAACG,GAAF,KAAU,OAAd,EAAuB,KAAI,CAACF,SAAL,CAAeD,CAAC,CAACE,aAAjB;AACxB,KAHD,CADkB;AAAA,GAApB;AAOA,OAAKf,KAAL,CAAWY,gBAAX,CAA4B,OAA5B,EAAqC,KAAKH,kBAA1C;AACD;;AACDhB,OAAO,CAACwB,SAAR,CAAkBC,SAAlB,GAA8B,YAAY;AACxCC,EAAAA,OAAO,CAACC,IAAR,CAAa,kBAAb,EADwC,CAExC;;AACA,MAAI,KAAKpB,KAAL,CAAWqB,OAAX,CAAmB,OAAnB,CAAJ,EAAiC;AAC/BF,IAAAA,OAAO,CAACC,IAAR,CAAa,oBAAb;AACA,WAF+B,CAEvB;AACT;;AACD,OAAKpB,KAAL,CAAWsB,SAAX,CAAqBC,GAArB,CAAyB,MAAzB,EAPwC,CASxC;;AACAC,EAAAA,MAAM,CAACZ,gBAAP,CAAwB,OAAxB,EAAiC,KAAKJ,WAAtC;AACA,OAAKJ,UAAL,CAAgBQ,gBAAhB,CAAiC,OAAjC,EAA0C,KAAKP,aAA/C;AACA,OAAKF,UAAL,CAAgBS,gBAAhB,CAAiC,OAAjC,EAA0C,KAAKL,aAA/C;AACD,CAbD;;AAeAd,OAAO,CAACwB,SAAR,CAAkBQ,UAAlB,GAA+B,YAAY;AACzCN,EAAAA,OAAO,CAACC,IAAR,CAAa,kBAAb;AACA,OAAKpB,KAAL,CAAWsB,SAAX,CAAqBI,MAArB,CAA4B,MAA5B,EAFyC,CAGzC;;AACAF,EAAAA,MAAM,CAACG,mBAAP,CAA2B,OAA3B,EAAoC,KAAKnB,WAAzC;AACA,OAAKJ,UAAL,CAAgBuB,mBAAhB,CAAoC,OAApC,EAA6C,KAAKtB,aAAlD;AACA,OAAKF,UAAL,CAAgBwB,mBAAhB,CAAoC,OAApC,EAA6C,KAAKpB,aAAlD;AACD,CAPD;;AAQAd,OAAO,CAACwB,SAAR,CAAkBR,kBAAlB,GAAuC,UAAUI,CAAV,EAAa;AAClD,MAAIA,CAAC,CAACe,MAAF,KAAaf,CAAC,CAACE,aAAnB,EAAkC;AAChC,SAAKU,UAAL;AACD;AACF,CAJD;;AAMAhC,OAAO,CAACwB,SAAR,CAAkBT,WAAlB,GAAgC,UAAUK,CAAV,EAAa;AAC3C,MAAIA,CAAC,CAACG,GAAF,KAAU,QAAd,EAAwB,KAAKS,UAAL;AACxB,MAAIZ,CAAC,CAACG,GAAF,KAAU,YAAd,EAA4B,KAAKX,aAAL;AAC5B,MAAIQ,CAAC,CAACG,GAAF,KAAU,WAAd,EAA2B,KAAKT,aAAL;AAC5B,CAJD;;AAMAd,OAAO,CAACwB,SAAR,CAAkBZ,aAAlB,GAAkC,UAAUQ,CAAV,EAAa;AAC7CM,EAAAA,OAAO,CAACU,GAAR,CAAY,IAAZ;AACA,OAAKf,SAAL,CACE,KAAKgB,YAAL,CAAkBC,kBAAlB,IAAwC,KAAKrC,OAAL,CAAasC,iBADvD;AAGD,CALD;;AAOAvC,OAAO,CAACwB,SAAR,CAAkBV,aAAlB,GAAkC,UAAUM,CAAV,EAAa;AAC7C,OAAKC,SAAL,CACE,KAAKgB,YAAL,CAAkBG,sBAAlB,IAA4C,KAAKvC,OAAL,CAAawC,gBAD3D;AAGD,CAJD;;AAMAzC,OAAO,CAACwB,SAAR,CAAkBH,SAAlB,GAA8B,UAAUqB,EAAV,EAAc;AAC1C,MAAI,CAACA,EAAL,EAAS;AACPhB,IAAAA,OAAO,CAACC,IAAR,CAAa,2BAAb;AACD,GAHyC,CAI1C;;;AACAD,EAAAA,OAAO,CAACU,GAAR,CAAYM,EAAZ;AACA,OAAKnC,KAAL,CAAWE,aAAX,CAAyB,KAAzB,EAAgCkC,GAAhC,GAAsCD,EAAE,CAACC,GAAzC;AACA,OAAKpC,KAAL,CAAWE,aAAX,CAAyB,IAAzB,EAA+BmC,WAA/B,GAA6CF,EAAE,CAACG,KAAhD;AACA,OAAKtC,KAAL,CAAWE,aAAX,CAAyB,UAAzB,EAAqCmC,WAArC,GAAmDF,EAAE,CAACI,OAAH,CAAWC,WAA9D;AACA,OAAKV,YAAL,GAAoBK,EAApB;AACA,OAAKjB,SAAL;AACD,CAXD,EAYA;;;AAEA,IAAMuB,QAAQ,GAAG,IAAIhD,OAAJ,CAAYQ,QAAQ,CAACC,aAAT,CAAuB,WAAvB,CAAZ,CAAjB;AACA,IAAMwC,QAAQ,GAAG,IAAIjD,OAAJ,CAAYQ,QAAQ,CAACC,aAAT,CAAuB,WAAvB,CAAZ,CAAjB;AAEAiB,OAAO,CAACU,GAAR,CAAYY,QAAZ,EAAsBC,QAAtB","file":"gallery-proto.6630d034.js","sourceRoot":"..","sourcesContent":["function Gallery(gallery) {\r\n  if (!gallery) {\r\n    throw new Error('No gallery element provided');\r\n  }\r\n\r\n  // & SELECT THE ELEMENTS WE NEED\r\n\r\n  this.images = Array.from(gallery.querySelectorAll('img'));\r\n  this.modal = document.querySelector('.modal');\r\n  this.prevButton = document.querySelector('.prev');\r\n  this.nextButton = document.querySelector('.next');\r\n\r\n  // bind our methods to the instance when we need them\r\n  this.showNextImage = this.showNextImage.bind(this);\r\n  this.showPrevImage = this.showPrevImage.bind(this);\r\n  this.handleKeyUp = this.handleKeyUp.bind(this);\r\n  this.handleClickOutside = this.handleClickOutside.bind(this);\r\n\r\n  //! THESE ARE OUR EVENT LISTENERS!\r\n\r\n  this.images.forEach((image) =>\r\n    image.addEventListener('click', (e) => {\r\n      this.showImage(e.currentTarget);\r\n    })\r\n  );\r\n  this.images.forEach((image) =>\r\n    image.addEventListener('keyup', (e) => {\r\n      // & when that is key up'd check if it was enter\r\n      if (e.key === 'Enter') this.showImage(e.currentTarget);\r\n    })\r\n  );\r\n\r\n  this.modal.addEventListener('click', this.handleClickOutside);\r\n}\r\nGallery.prototype.openModal = function () {\r\n  console.info('opening modal...');\r\n  // & first check if the modal is already open\r\n  if (this.modal.matches('.open')) {\r\n    console.info('modal already open');\r\n    return; // stop function from running\r\n  }\r\n  this.modal.classList.add('open');\r\n\r\n  // ! EVENT LISTENERS TO BE BOUND WHEN WE OPEN THE MODAL:\r\n  window.addEventListener('keyup', this.handleKeyUp);\r\n  this.nextButton.addEventListener('click', this.showNextImage);\r\n  this.prevButton.addEventListener('click', this.showPrevImage);\r\n};\r\n\r\nGallery.prototype.closeModal = function () {\r\n  console.info('closing modal...');\r\n  this.modal.classList.remove('open');\r\n  // TODO: add event listeners for clicks and keyboard...\r\n  window.removeEventListener('keyup', this.handleKeyUp);\r\n  this.nextButton.removeEventListener('click', this.showNextImage);\r\n  this.prevButton.removeEventListener('click', this.showPrevImage);\r\n};\r\nGallery.prototype.handleClickOutside = function (e) {\r\n  if (e.target === e.currentTarget) {\r\n    this.closeModal();\r\n  }\r\n};\r\n\r\nGallery.prototype.handleKeyUp = function (e) {\r\n  if (e.key === 'Escape') this.closeModal();\r\n  if (e.key === 'ArrowRight') this.showNextImage();\r\n  if (e.key === 'ArrowLeft') this.showPrevImage();\r\n};\r\n\r\nGallery.prototype.showNextImage = function (e) {\r\n  console.log(this);\r\n  this.showImage(\r\n    this.currentImage.nextElementSibling || this.gallery.firstElementChild\r\n  );\r\n};\r\n\r\nGallery.prototype.showPrevImage = function (e) {\r\n  this.showImage(\r\n    this.currentImage.previousElementSibling || this.gallery.lastElementChild\r\n  );\r\n};\r\n\r\nGallery.prototype.showImage = function (el) {\r\n  if (!el) {\r\n    console.info('no image element provided');\r\n  }\r\n  // update the modal with this info\r\n  console.log(el);\r\n  this.modal.querySelector('img').src = el.src;\r\n  this.modal.querySelector('h2').textContent = el.title;\r\n  this.modal.querySelector('figure p').textContent = el.dataset.description;\r\n  this.currentImage = el;\r\n  this.openModal();\r\n};\r\n// use it on the page\r\n\r\nconst gallery1 = new Gallery(document.querySelector('.gallery1'));\r\nconst gallery2 = new Gallery(document.querySelector('.gallery2'));\r\n\r\nconsole.log(gallery1, gallery2);\r\n"]}